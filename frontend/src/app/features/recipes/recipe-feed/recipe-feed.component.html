<div class="recipe-feed">
  <div class="feed-container">
    <div class="feed-header">
      <h1>Recipe Feed</h1>
      <p class="feed-subtitle">Discover and share delicious recipes from our community</p>
    </div>
    <div class="category-container">
      <button
        type="button"
        class="category-button"
        [class.active]="currentCategory === null"
        (click)="setCategory(null)"
      >All</button>
      @for (cat of categories(); track cat) {
        <button
          type="button"
          class="category-button"
          [class.active]="currentCategory === cat"
          (click)="setCategory($any(cat))"
        >{{ cat | titlecase }}</button>
      }
    </div>
    <div class="filter-bar">
      <div class="filter-group">
        <label for="sort-select" class="filter-label">Sort by:</label>
        <select
          id="sort-select"
          class="filter-dropdown"
          [value]="currentSort"
          (change)="setSortBy($any($event.target).value)"
        >
          <option value="newest">Newest</option>
          <option value="top-rated">Top Rated</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="date-range-select" class="filter-label">Date:</label>
        <select
          id="date-range-select"
          class="filter-dropdown"
          [value]="currentDateRange"
          (change)="setDateRange($any($event.target).value)"
        >
          <option value="all-time">All Time</option>
          <option value="today">Today</option>
          <option value="this-week">This Week</option>
          <option value="this-month">This Month</option>
          <option value="this-year">This Year</option>
        </select>
      </div>
    </div>
    @if (loading) {
      <app-loading-spinner />
    } @else {
      @if (recipes.length === 0) {
        <div class="empty-state">
          <p>No recipes found. Be the first to share a recipe!</p>
        </div>
      } @else {
        <div class="recipe-grid">
          @for (recipe of recipes; track recipe.id) {
            <app-recipe-card [recipe]="recipe" />
          }
        </div>
      }
    }
  </div>
</div>
